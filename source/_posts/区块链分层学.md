---
title: 区块链分层学：新的开始
date: 2025-09-28
categories:
  - 技术思考
tags: [区块链, 分层架构]
cover: https://lawliet-chan.github.io/images/split.png
---

在科技与社会快速演进的今天，分层设计已经成为复杂系统得以高效运转的基石。无论是现实世界中的金融、商业、社交，还是计算机科学中的操作系统、网络协议，抑或是区块链技术的架构，分层思想贯穿始终。分层不仅是一种技术上的分工，更是一种哲学：通过明确职责边界，让每一层专注于自身核心问题，从而构建出通用、灵活且可扩展的系统。本文将从现实世界的分层现象出发，延伸到计算机领域的分层设计，最后聚焦于区块链分层学的核心思想，探讨为何分层是Web3迈向成熟的必经之路。

## 一、现实世界的分层：专业化与生态化

在现实世界中，分层是社会分工的自然体现。金融体系有美联储这样的中央银行，负责货币政策的制定与资产结算；证券交易有纳斯达克，提供高效的股票交易平台；搜索领域有谷歌，优化信息的获取与组织；网购有亚马逊，构建便捷的电商生态；社交有Facebook（现为Meta），连接人与人；出行则有Uber，解决点对点的交通需求。这些系统各司其职，共同构成了现代社会的运转基石。

试想，如果一家银行试图同时扮演美联储、纳斯达克、谷歌、亚马逊、Facebook和Uber的角色，结果会怎样？它不仅无法高效完成任何一项任务，还会因为资源分散和复杂性激增而崩溃。现实世界告诉我们，分层是效率的来源。每个系统专注于自己的核心功能，通过标准化的接口与上下游协作，形成一个繁荣的生态。这种分工逻辑同样适用于技术世界，尤其是在计算机科学和区块链领域。

## 二、计算机领域的分层：职责清晰，边界明确

计算机科学中的分层设计是现代信息技术的基石。通过将复杂的系统分解为多个层次，每一层专注于解决特定问题，并通过标准化的接口与上下层交互，系统得以在复杂性与灵活性之间取得平衡。以下以操作系统和计算机网络为例，阐述分层设计的精髓。

### 2.1 操作系统与上层应用的解耦

在计算机系统中，操作系统（OS）是硬件与应用之间的桥梁。操作系统的核心职责是管理硬件资源、提供文件系统安全性和基本的服务接口，而非干涉上层应用的业务逻辑。以数据库为例，事务一致性是数据库层需要解决的问题，而非操作系统。例如，联机事务处理（OLTP）系统对事务一致性要求极高，追求强一致性以确保数据准确；而联机分析处理（OLAP）系统则更注重查询性能，愿意牺牲部分一致性以换取效率。如果操作系统试图在底层强制实现强一致性，OLAP系统将难以在其上高效运行。

不同的业务系统有不同的需求：有些是计算密集型，追求极致的处理速度；有些是I/O密集型，强调数据吞吐量。操作系统若试图为某一类应用优化而做出取舍，势必会削弱其通用性。因此，操作系统的设计哲学是提供通用的基础设施，让上层应用根据自身场景自行处理权衡。这种分层解耦赋予了系统灵活性和扩展性。

### 2.2 计算机网络的四层模型

计算机网络的四层模型（链路层、网络层、传输层、应用层）是分层设计的经典案例。每一层专注于解决自身的问题，并通过明确定义的接口与上下层交互：

- **链路层**：负责在本地网络段内可靠地传输数据帧，例如以太网协议。它专注于MAC地址寻址和本地转发（如通过交换机在同一子网内的多跳传输），而不会涉及跨网络的全局路由。
- **网络层**：负责数据包的全局路由和转发，例如IP协议。它专注于寻址和路径选择，不干涉数据传输的可靠性。
- **传输层**：提供端到端的通信服务，例如TCP确保可靠传输，UDP追求低延迟。它只关注数据的传输质量，不关心数据的具体内容。
- **应用层**：处理具体的业务逻辑，例如HTTP协议定义了网页请求的格式与内容。它无需关心底层的数据如何传输。

这种分层设计确保了每一层只解决自身的问题，而不会越界。例如，传输层不会去定义HTTP报文的结构，应用层也不会去处理TCP的重传机制。这种清晰的边界划分不仅降低了系统设计的复杂性，还使得每一层可以独立优化和演进。

## 三、区块链中的分层：从L1到L2的生态演进

区块链作为一种去中心化的技术体系，其复杂性不亚于现实世界的金融系统或计算机网络。分层设计在区块链中的应用，不仅是技术上的需要，更是Web3生态繁荣的必然选择。

### 3.1 L1：资产定义与结算的基石

第一层区块链（L1）类似于现实世界中的中央银行，其核心职责是定义资产、确保结算的安全性和可信性。以比特币和以太坊为例，L1负责维护账本的完整性、共识机制的稳定性以及资产的最终结算。L1的设计目标是提供一个通用的、信任最小化的基础设施，而非直接解决特定应用场景的问题。

正如美联储不会去构建纳斯达克的交易系统，也不会去开发谷歌的搜索引擎，L1区块链不应试图解决所有应用层面的问题。试图将所有功能集成到L1会导致系统臃肿、效率低下，并限制其通用性和可扩展性。例如，最大可提取价值（MEV）问题是去中心化金融（DeFi）场景中的典型挑战，但并不普遍存在于其他领域，如元宇宙或供应链管理。如果L1试图在本层解决MEV问题，可能会对其他应用场景造成负面影响，甚至削弱其生态的多样性。

### 3.2 L1的专注：抽象与通用

L1的核心价值在于解决抽象且通用的基础问题，例如：

- **安全性**：确保账本不可篡改，抵御攻击，同时包括共识的安全性、系统的稳定性和健壮性。
- **可扩展性**：支持更高的兼容性，以适应各种应用系统的扩展，而非单纯追求性能指标。
- **无信任成本**：通过密码学和共识机制，确保用户无需信任第三方，从而降低信任成本。

这些问题具有高度的通用性，适用于所有区块链应用场景。L1不应主动为特定应用场景做出取舍，而是提供一个中立的平台，让上层应用（L2或者L3）根据自身需求进行优化。例如，DeFi场景可能需要快速的交易确认，而元宇宙场景可能更注重低延迟的交互体验。这些权衡应由上层负责，而非L1。

### 3.3 L2：应用场景的多样化实现

第二层区块链（L2）是应用场景的承载者。L2通过在L1上构建专用链，解决特定领域的业务逻辑和性能需求。例如，Unichain等DeFi专属L2链已经初露端倪，未来可能还会出现元宇宙链、出行链（类似Uber）、搜索链、AI链等。这些L2链专注于各自场景的独特挑战：

- **DeFi链**：优化交易排序以缓解MEV问题，或提高吞吐量以支持高频交易。
- **元宇宙链**：强调低延迟和高并发，以支持实时交互和虚拟世界体验。
- **AI链**：提供高效的计算资源分配，适配机器学习模型的训练与推理。

L2通过零知识证明虚拟机（zkVM）或乐观Rollup等技术，将状态计算的正确性验证回传至L1，确保资产结算的安全性。这种分层设计让L1保持轻便和通用，而L2则可以灵活应对多样化的业务需求。

## 四、Web3的未来：分层驱动的生态繁荣

Web3的愿景是将区块链技术融入人类生活的方方面面，类似于Web2如何通过互联网改变了信息传播、商业模式和社会互动。要实现这一目标，区块链必须摆脱“一链通吃”的思维，拥抱分层设计。L1作为资产定义与结算的基石，提供安全、可扩展、无信任成本的底层支持；L2则作为应用场景的孵化器，承载多样化的业务逻辑和创新。

分层不仅是一种技术选择，更是一种生态哲学。通过清晰的职责划分，区块链可以像现实世界的金融、商业、社交系统一样，形成一个分工明确、协作高效的生态系统。未来的Web3将是一个由L1提供信任根基、由无数L2承载创新的繁荣世界。只有迈出分层这一步，Web3才能真正兑现其改变世界的潜力。
