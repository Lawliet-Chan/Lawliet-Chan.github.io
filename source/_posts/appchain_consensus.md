---
title: 区块链分层学：我们需要自己的共识
date: 2025-09-30
categories: 
    - 技术思考
tags: [区块链, 分层架构, 共识]
cover: https://lawliet-chan.github.io/images/appchain_consensus.png
---


在区块链的世界里，共识机制如同心脏般泵送着整个系统的活力。它不仅仅是技术层面的协议，更是构建信任的基石。随着区块链从单一的Layer 1（L1）向多层架构演进，我们越来越意识到，一刀切的共识设计已无法满足分层生态的多样需求。L1的铁律或许适用于根基，但L2乃至专有应用链，却需要量身定制的“共识哲学”。本文将从区块链共识的基本概念入手，逐步探讨L1与L2的共识特征，并延伸至专有应用链的设计思路，旨在为开发者提供一个更务实的框架：我们需要自己的共识。

## 什么是区块链共识

区块链共识的核心在于如何让分布式网络中的节点就账本状态达成一致，从而实现去中心化的状态转变和数据存储。它不是简单的投票机制，而是通过一系列步骤，确保网络的安全、活性和一致性。传统上，共识过程可以拆解为四个关键阶段：准入共识、出块共识、最终共识，以及退出共识。

- 准入共识：决定了谁有资格参与网络。通常，这通过经济门槛（如抵押资产）或计算证明（如工作量）来筛选节点，防止恶意参与者轻易进入。
- 出块共识：则聚焦于生成新区块：节点竞争或协作打包交易，形成候选区块，并通过机制如工作量证明（PoW）或权益证明（PoS）选出获胜者。
- 最终共识：是整个过程的收官，它确认区块的不可逆转性，常借助拜占庭容错（BFT）变体来处理分歧，确保大多数节点认可的链成为“正链”。
- 最后，退出共识处理节点的离场：它可能涉及罚没抵押品或优雅退出的规则，以维护网络的长期健康。

这些步骤看似线性，却环环相扣，形成了一个闭环。理解它们，不仅是为L1奠基，更是为分层架构铺路。因为在L1之外的世界，共识的“纯度”可以有所妥协，但其本质——去中心化的保障——永不过时。

## L1的共识特征

Layer 1区块链，如比特币或以太坊，代表了区块链技术的巅峰追求：几乎最顶级的trustless（无信任成本）。是超越国家主权、超越任何主体级别的绝对独立。它要求系统在形式逻辑的牢笼中运行，除了数学定理和博弈论模型外，不得引入任何非形式化逻辑的外部依赖。试想，一个L1共识如果依赖于某个中心化实体，那它就退化成了“披着羊皮的狼”，随时可能被监管或故障颠覆。

因此，L1的共识设计极端严苛。PoW通过计算力博弈确保随机性和安全性，PoS则用经济激励维持诚实（注：笔者完全不认可POS共识，尽管它看起来是目前的主流做法）。这些机制不信任人类意图，只信概率和惩罚。结果是高昂的成本——能源消耗或资本锁定——但换来的是主权级别的鲁棒性。L1不是为性能而生，而是为永恒而战。它是区块链的“宪法”，不容玷污。

然而，当我们转向Layer 2时，共识的哲学开始松动。L1的绝对主义虽伟大，却不宜生搬硬套。L2的生态更贴近应用，需要在安全与效率间寻求平衡。这就引出了一个关键问题：L2究竟需要怎样的共识？

## L2的共识：为什么需要，以及它不同于L1

L2的共识并非可有可无的点缀，而是去中心化的脊梁。许多人误以为，零知识证明（ZK）技术如zkVM或zkEVM已足够保障L2的安全————它们确实强大，能高效验证交易的有效性。但有效性证明仅解决“交易执行结果是否正确”的问题，却忽略了更棘手的抗审查性。审查不是计算错误，而是权力干预：一个中心化排序器能随意延迟或拒绝交易，zk证明再严谨也无力回天。

更何况，纯中心化L2隐患重重。它容易陷入CFT（Crash Fault Tolerance）陷阱————单点故障导致全网宕机。为此，许多Rollup项目配备“逃生舱”或强制提现功能：用户可在检测到异常时单方面提取资产。这不过是中心化下的无奈补丁，并非长久之计。如果L2彻底中心化，它与中心化交易所何异？用户资金安全系于少数节点之手，监管风险如影随形。

当然，L2的去中心化不必攀比L1的绝对高度。L1需对抗全球主权，L2则可借力其上，追求“相对trustless”。这不意味着L2可以一步到位地拥抱中心化————那将牺牲区块链的核心价值。相反，我们应设计一种适度的共识：足够去中心化以抗审查，却不失性能优势。

## 该如何设计L2的共识

设计L2共识时，首先要直面现实：L1在安全、去中心化、扩展性和抽象性上均优于L2。L2的安全性天然弱于L1，它更面向具体场景，能容忍更高的定制化和性能追求。但这不是劣势，而是机遇。L2多了一个独特资产：L1作为理论上的可信源。我们可以借用L1的数据或状态，作为L2共识的输入锚点，从而以L1的铁律保障L2的安全。这是一种“分层借力”的方法论，远胜于从零重造轮子。

在此，笔者抛砖引玉一下，举个例子：    

在准入共识阶段，我们可将L1上的链数据或数字资产（如BTC、ETH、USDT）设为门槛。

- 节点需燃烧/转账/抵押L1资产或证明其在L1上的活跃度，这不仅过滤低质参与者，还将L1的经济安全注入L2。

出块共识则可巧妙融合L1元素，确保随机性和公平性。

- 例如，通过L1上的特定操作——如燃烧代币或转账 + L2上的一些协议算法 生成随机种子，计算由哪个节点来出块。这使得L1的随机性成为L2随机性的护盾。

至于最终共识，许多PoS公链在此采用类BFT机制：工程量庞大且机制复杂，且安全性仍逊于L1。我们不必效仿。

- 取而代之的是，将出块后的区块按自定义的可验证的fork choice规则上传至L1，定期finalized。一旦L2区块在L1上被确认，它便不可回滚——L1的最终性即L2的最终性。这简化了设计，避开了BFT的复杂度陷阱，却借L1之力铸就铁板一块。

这种L2共识并非共识设计的终点，而是分层共识的典范。

## 专有应用链的共识：场景即锚点

L2的思路若推而广之，便可延伸至专有应用链。这些链不像通用L1/L2那样追求普适性，而是深耕特定领域，共识设计自然需因地制宜。盲目套用PoW或PoS+BFT，不仅低效，还会忽略场景红利。相反，我们应识别“可信源”——那些在特定语境下高度可靠的外部输入——作为共识的基石。

譬如，开发一个美股交易的专有应用链，可将纳斯达克的实时股价作为准入或出块的锚点：节点需证明其持仓与股价挂钩，确保参与者与市场同步。这不是引入中心化，而是借用公信力高的数据源，提升共识的现实相关性。同样，对于招聘领域的应用链，学信网的学历验证数据可注入最终共识：验证节点需引用这些数据作为fork choice的输入，防范虚假简历的链上泛滥。

不同场景，可信源各异：供应链链或用IoT传感器数据，DeFi专链或锚定美联储利率。关键在于，这些源不是“信任黑箱”，而是特定场景下的实际信任锚点。它们让共识从抽象数学转向具体价值，性能上升的同时，也不牺牲安全性，同时使得系统复杂度下降。

## 结语：共识的未来是分层的

区块链分层学告诉我们，共识不是一成不变的教条，而是可塑的艺术。L1筑基，L2借力，专有链定制——层层递进，却各有千秋。我们无需在L1的阴影下自卑，而应拥抱“自己的共识”：安全与适配并重，抽象与具体交融。唯有如此，区块链才能从技术玩具蜕变为全球基建。开发者们，让我们动笔吧——下一个共识，或许就藏在你的应用场景中。